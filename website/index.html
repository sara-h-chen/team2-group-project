<!DOCTYPE html>
<head>
	<link type="text/css" rel="stylesheet" href="courgette_base_stylesheet.css"/>
	<link href="https://fonts.googleapis.com/css?family=Fredoka+One|Roboto" rel="stylesheet">
	<link rel="stylesheet" media="screen and (max-width: 800px)" href="courgette_base_stylesheet_mobile.css" />
	<link rel="shortcut icon" type="image/png" href="favicon.png"/>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<title>COURGETTE</title>
	
</head>

<body style="overflow:scroll">
<div class="header_container grey_container">
	<img src="logo.png" id="header_logo"/>
	<div class="wrapper">
		<button class ="nav_button" id="log_in">Log In</button>
	</div>
	<div class="wrapper">
		<button  class ="nav_button" id="sign_up">Sign Up</button>
	</div>
</div>
<div class="header_image_div">
<!-- 	<img src="index_header_image.jpg" class="header_image"/> -->
	<h1 class="header_image_blurb">Help us reduce food waste.</h1>
</div>

<div id="log_in_popup" class="popup">
	<div class="popup_header">
		<span class="close">&times;</span>
		<h2>Log In</h2>
	</div>
	<div class="popup_content">
		<form id="log_in_form">
			<p>Username:</p>
			<input class="index_input" type="text" id="login_username">
			<br>
			<p>Password:</p>
			<input class="index_input" type="password" id="login_password">
		</form>
	</div>
	<div class="popup_footer" id="sign_up_footer">
		<input type="submit" id="sign_up_button" onclick="login()" value="Log In">
	</div>
</div>

<div id="sign_up_popup" class="popup">
	<div class="popup_header">
		<span class="close">&times;</span>
		<h2>Sign Up</h2>
	</div>
	<div class="popup_content" id="sign_up_content">
		<form id="sign_up_form">
			<p>Username:</p>
			<input class="index_input" type="text" id="signup_username">
			<br>
			<p>Email: </p>
			<input class="index_input" type="text" id="signup_email">
			<br>
			<p>Password:</p>
			<input class="index_input" type="password" id="signup_password">
		</form>
	</div>
	<div class="popup_footer" id="sign_up_footer">
		<input type="submit" id="sign_up_button" onclick="signup()" value="Create Account">
	</div>
</div>

<div id="site_content">
	<div class="content_container green_container">
		<h2 id="intro_header">In the UK, we throw away <em id="em3">7 million tonnes</em> of food and drink every year.
		<br>Over <em id="em3">half</em> of that food and drink could have been eaten.</h2> 
	</div>
	<div class="content_container white_container">
		<div class="centered_container">
			<div class="left_column">
				<img alt="Foodspot Image" src="index_foodspot.png" class="index_foodspot">
			</div>
			<div class="right_column">
				<p class="paragraph"><em class="logo_font" id="em1"><br/>COURGETTE</em> proposes a practical solution to this problem. 
				We want to enable the widespread practice of foodsharing using a simple online tool. 
				<em class="logo_font" id="em1">COURGETTE</em> allows you to share unwanted food and accept 
				food sharing offers with those in your vicinity.<br/></p><br/>
				<div class="padded_container green_container2">
					<a href="">
						<h2 id="link">JOIN THE <em id="em2">FOODSHARING</em> REVOLUTION</h2>
					</a>
				</div>
			</div>
		</div>
	</div>
	<div class="footer_images">
			<img alt="Stock Image Food" id="tile_1" class="index_tiled_image" src="index_tiled_image_1.jpg">
			<img alt="Stock Image Food" id="tile_2" class="index_tiled_image" src="index_tiled_image_2.jpg">
			<img alt="Stock Image Food" id="tile_3" class="index_tiled_image" src="index_tiled_image_3.jpg">
	</div>
</div>

<div id="site_footer" class="header_container grey_container">
	<a href=""><img class="social_media_icon" src="youtube_icon.png"></a>
	<a href=""><img class="social_media_icon" src="facebook_icon.png"></a>
	<a href=""><img class="social_media_icon" src="twitter_icon.png"></a>
	<a href=""><img class="social_media_icon" src="instagram_icon.png"></a>
	<img alt="Courgette Logo" src="logo_white.png" class="logo_right_align"/>
	<h3 class="clear right_align">COURGETTE SOFTWARE SOLUTIONS 2016</h3>
</div>
</body>

<script>
	// Get the modal
	var popup = document.getElementById('log_in_popup');

	// Get the button that opens the modal
	var btn = document.getElementById("log_in");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on the button, open the modal 
	btn.onclick = function() {
		popup.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		popup.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	}
	
	function goToProfile() {
		window.location.href = "profile_and_map.html";
	}
	
	// Get the modal
	var popup2 = document.getElementById('sign_up_popup');

	// Get the button that opens the modal
	var btn2 = document.getElementById("sign_up");

	// Get the <span> element that closes the modal
	var span2 = document.getElementsByClassName("close")[1];

	// When the user clicks on the button, open the modal 
	btn2.onclick = function() {
		popup2.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span2.onclick = function() {
		popup2.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	}
	
	function goToProfile() {
		window.location.href = "profile_and_map.html";
	}
	
	function signup()
	{
		var data = {"username":$("#signup_username").val(), "password":$("#signup_password").val(), "email":$("#signup_email").val()};
		$.post({
			url: "http://sarachen.pythonanywhere.com/backend/newuser/",
			data: JSON.stringify(data),
			contentType: "application/json",
			dataType: "json",
			success:function()
			{
				alert("Account Created");
				document.getElementById('sign_up_popup').style.display = "none";
			},
			error:function()
			{
				alert("Unable to create account");
			}
		});
	}
	
	function login()
	{
		var login = {"username" : $("#login_username").val(), "password" : $("#login_password").val()};
	
		$.post({
			url: "http://sarachen.pythonanywhere.com/backend/login/",
			data: JSON.stringify(login),
			contentType: "application/json",
			dataType: "json",
			success:function(data)
			{
				document.cookie = "authToken=" + data.token + "; path=/";
				window.location.replace("http://community.dur.ac.uk/thomas.j.whittaker/web/team2-group-project/website/profile_and_map.html");
			},
			error:function(data)
			{
				alert("Invalid login information");
			}
		});
	}
</script>

<footer>
</footer>
